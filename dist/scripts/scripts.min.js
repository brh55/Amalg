var GmailUrl="https://mail.google.com/mail/?view=cm&fs=1&tf=1",title="",url="",selectedText="",createGmail=function(e){var t="",n="";n+=title,t=""==e?url:e+"\n"+url,chrome.windows.create({url:GmailUrl+"&su="+encodeURIComponent(n)+"&body="+encodeURIComponent(t),left:20,top:30,width:700,height:600})};document.addEventListener("DOMContentLoaded",function(){chrome.tabs.query({active:!0,currentWindow:!0},function(e){e[0]})}),chrome.extension.onRequest.addListener(function(e){helpers.buildArticle();createGmail(selectedText)}),chrome.browserAction.onClicked.addListener(function(e){chrome.tabs.executeScript(null,{file:"infopasser.js"}),title=e.title,url=e.url});var articleModel={title:"",summary:"",link:"",author:"",image:""},helpers={fetchMetaData:function(){return document.getElementsByName("meta")},getMetaContent:function(e){var t=document.getElementsByName(e);return t.length>0?t[0].content:!1},fetchImages:function(){return document.getElementsByTagName("img")},getDescription:function(){var e=document.getElementsByName("description")||document.getElementsByName("abstract")||document.getElementsByName("summary");return e.length>0?e[0].content:"Description not available."},buildArticle:function(){var e=Object.create(articleModel,{title:{value:helpers.getMetaContent("title")||""},description:{value:helpers.getDescription()},link:{value:window.location.href},author:{value:helpers.getMetaContent("author")||""},image:{value:helpers.getMetaContent("thumbnail")||""}});return e}};
